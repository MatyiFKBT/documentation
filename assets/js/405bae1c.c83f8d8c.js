"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[3617],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>c});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},g=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),g=p(n),c=a,m=g["".concat(s,".").concat(c)]||g[c]||d[c]||o;return n?i.createElement(m,l(l({ref:t},u),{},{components:n})):i.createElement(m,l({ref:t},u))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=g;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:a,l[1]=r;for(var p=2;p<o;p++)l[p]=n[p];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}g.displayName="MDXCreateElement"},27805:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>p});var i=n(87462),a=(n(67294),n(3905));const o={id:"using_with_php",title:"Using with PHP",sidebar_label:"Using with PHP",slug:"/web/using_with_php"},l=void 0,r={unversionedId:"web/using_with_php",id:"web/using_with_php",title:"Using with PHP",description:"To get full image of working PHP integration check our PHP example application.",source:"@site/docs/web/using_with_php.mdx",sourceDirName:"web",slug:"/web/using_with_php",permalink:"/docs/web/using_with_php",draft:!1,editUrl:"https://github.com/tolgee/documentation/tree/main/docs/web/using_with_php.mdx",tags:[],version:"current",frontMatter:{id:"using_with_php",title:"Using with PHP",sidebar_label:"Using with PHP",slug:"/web/using_with_php"},sidebar:"someSidebar",previous:{title:"API",permalink:"/docs/web/using_with_i18next/api"},next:{title:"Using with Dart",permalink:"/docs/web/using_with_dart"}},s={},p=[{value:"Composer library installation",id:"composer-library-installation",level:2},{value:"Tolgee instance initialization",id:"tolgee-instance-initialization",level:2},{value:"Providing values",id:"providing-values",level:2},{value:"Message format",id:"message-format",level:3},{value:"Safe translating",id:"safe-translating",level:2},{value:"Production mode",id:"production-mode",level:2},{value:"Importing JS library in your HTML document",id:"importing-js-library-in-your-html-document",level:2},{value:"Configuration properties",id:"configuration-properties",level:2},{value:"mode",id:"mode",level:3},{value:"inputPrefix",id:"inputprefix",level:3},{value:"inputSuffix",id:"inputsuffix",level:3},{value:"apiUrl",id:"apiurl",level:3},{value:"apiKey",id:"apikey",level:3},{value:"defaultLanguage",id:"defaultlanguage",level:3},{value:"fallbackLanguage",id:"fallbacklanguage",level:3},{value:"developmentTranslationsSource",id:"developmenttranslationssource",level:3},{value:"localFilesAbsolutePath",id:"localfilesabsolutepath",level:3}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"To get full image of working PHP integration check our ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/tolgee/php-example"},"PHP example application"),"."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"To use PHP integration library in development mode for in-context translating, don't forget to ",(0,a.kt)("a",{parentName:"p",href:"using_with_php#importing-js-library-in-your-html-document"},"integrate JS library"),".")),(0,a.kt)("p",null,"To install Tolgee PHP integration run:"),(0,a.kt)("h2",{id:"composer-library-installation"},"Composer library installation"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"composer require tolgee\n")),(0,a.kt)("h2",{id:"tolgee-instance-initialization"},"Tolgee instance initialization"),(0,a.kt)("p",null,"To use Tolgee with PHP, start with creating TolgeeConfig class instance and Tolgee class instance."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n\nuse Tolgee\\Core\\Enums\\Modes;\nuse Tolgee\\Core\\Tolgee;\nuse Tolgee\\Core\\TolgeeConfig;\n\n$config = new TolgeeConfig();\n$config->apiKey = "your api key"\n$config->apiUrl = "your api url"\n$config->mode = Modes::DEVELOPMENT;\n\n$tolgee = new Tolgee($config);\n')),(0,a.kt)("p",null,"Then you can simply use Tolgee to translate strings:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},'$tolgee->translate("hello_world");\n')),(0,a.kt)("p",null,"In development mode this function will return ",(0,a.kt)("inlineCode",{parentName:"p"},"%-%tolgee:hello_world%-%"),". This output is meant to be translated in\nbrowser by tolgee JS library. See ",(0,a.kt)("a",{parentName:"p",href:"get_started/hello_world"},"hello world example"),"."),(0,a.kt)("h2",{id:"providing-values"},"Providing values"),(0,a.kt)("p",null,"You can provide translation values as second parameter of ",(0,a.kt)("inlineCode",{parentName:"p"},"translate")," function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},'$tolgee->translate("peter_has_n_dogs", ["dogCount" => "5"]); //\n')),(0,a.kt)("p",null,'When the translation text before parameter interpolation is "Peter has {dogCount}", returned value will be'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"`%-%tolgee:peter_has_n_dogs:dogCount:5%-%`\n")),(0,a.kt)("p",null,"Again, this value will be handled by JS library running in browser, so the visible output will be:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Peter has 5 dogs.\n")),(0,a.kt)("h3",{id:"message-format"},"Message format"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Since v1.2-BETA, ICU message format is used.")),(0,a.kt)("p",null,"All Tolgee integration libraries follow ICU message format. Tolgee for PHP is using ",(0,a.kt)("inlineCode",{parentName:"p"},"MessageFormatter::format")," method\nto format the messages. That's why you will need to enable PHP ",(0,a.kt)("inlineCode",{parentName:"p"},"intl")," extension."),(0,a.kt)("p",null,"To learn more about this format, read this article on ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/International_Components_for_Unicode"},"Wikipedia"),".\nOr use play with it using this nice ",(0,a.kt)("a",{parentName:"p",href:"https://devpal.co/icu-message-editor/"},"tool"),"."),(0,a.kt)("h2",{id:"safe-translating"},"Safe translating"),(0,a.kt)("p",null,"If the translation cannot be handled by mutation observer running in browser, use third parameter ",(0,a.kt)("inlineCode",{parentName:"p"},"noWrap = true"),"\nto ge translation right away."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},'$tolgee->translate("peter_has_n_dogs", ["dogCount" => "5"], true); //Peter has 5 dogs.\n')),(0,a.kt)("p",null,"Return value of this function is ",(0,a.kt)("inlineCode",{parentName:"p"},"Peter has 5 dogs"),". This is useful when you want to use Tolgee for translations ending\nup in e-mails (where obviously JS library has no power) or when you can see some ugly encoded string such as\n",(0,a.kt)("inlineCode",{parentName:"p"},"%-%tolgee:peter_has_n_dogs:dogCount:5%-%")," in web page rendered in browser."),(0,a.kt)("h2",{id:"production-mode"},"Production mode"),(0,a.kt)("p",null,"In production mode all your translations are loaded from local JSON localization files. You can obtain there files by\n",(0,a.kt)("a",{parentName:"p",href:"/docs/platform/exporting_translations"},"exporting them using Tolgee Web Application"),"."),(0,a.kt)("p",null,"To configure an absolute path where Tolgee will find the localization files set ",(0,a.kt)("inlineCode",{parentName:"p"},"localFilesAbsolutePath"),"\nof ",(0,a.kt)("inlineCode",{parentName:"p"},"TolgeeConfig")," class instance."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},'$config = new TolgeeConfig();\n$config->mode = Modes::PRODUCTION;\n$config->localFilesAbsolutePath = __DIR__ . "/i18n/";\n')),(0,a.kt)("h2",{id:"importing-js-library-in-your-html-document"},"Importing JS library in your HTML document"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Running Tolgee JS package in the browser is required to translate texts in development mode. Without configuring and running\nTolgee in the browser, you will get just ugly encoded strings such as"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"%-%tolgee:oh_no%-%"))),(0,a.kt)("p",null,"See ",(0,a.kt)("inlineCode",{parentName:"p"},"getTolgeeFrontendPart"),"\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/tolgee/php-example/blob/9b6b38c023b7169d9767b37fc3892536b5230d57/TolgeeManager.php#L35"},"function of our example"),"."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Inicialization has changed in ",(0,a.kt)("a",{parentName:"p",href:"/docs/changelog/tolgee_js_version_3"},"version 3"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<div id="loading" style="position: fixed; top:0; left: 0; width: 100%; height: 100%;\n            background-color: white; display: flex; align-items: center; justify-content: center;">\n    Loading...\n</div>\n<script src="node_modules/@tolgee/core/dist/tolgee.window.js"><\/script>\n<script src="node_modules/@tolgee/ui/dist/tolgee.window.js"><\/script>\n<script>\n    const { Tolgee, IcuFormatter } = window["@tolgee/core"]\n    const tg = Tolgee.use(IcuFormatter).init({\n        apiUrl: "\' . $this->getConfig()->apiUrl . \'",\n        apiKey: "\' . $this->getConfig()->apiKey . \'",\n        defaultLanguage: "\' . $this->getConfig()->defaultLanguage . \'",\n        inputPrefix:  "\' . $this->getConfig()->inputPrefix . \'",\n        inputSuffix:  "\' . $this->getConfig()->inputSuffix . \'",\n        ui: window["@tolgee/ui"].UI,\n    });\n\n    tg.lang = "\' . $_GET["lang"] . \'"\n    tg.run().then(() => {\n        document.getElementById("loading").style.display = "none";\n    })\n<\/script>\n')),(0,a.kt)("p",null,"This is probably not the way you will integrate Tolgee JS libraries in your PHP application.\nYou are probably using some PHP framework using some kind of templating engine such as Latte or Blade, but for\nillustration this example should be fine."),(0,a.kt)("p",null,"The important thing is to keep configuration parameters same as in your PHP code."),(0,a.kt)("h2",{id:"configuration-properties"},"Configuration properties"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"TolgeeConfig")," file contains following configuration properties:"),(0,a.kt)("h3",{id:"mode"},"mode"),(0,a.kt)("p",null,"Whether to use Tolgee in development or production mode. (bool, default: ",(0,a.kt)("inlineCode",{parentName:"p"},"Modes::PRODUCTION"),")"),(0,a.kt)("h3",{id:"inputprefix"},"inputPrefix"),(0,a.kt)("p",null,"The prefix, which is prepended to encoded localization string. (string, default: ",(0,a.kt)("inlineCode",{parentName:"p"},"%-%tolgee:"),")"),(0,a.kt)("h3",{id:"inputsuffix"},"inputSuffix"),(0,a.kt)("p",null,"The suffix, which is appended to encoded localization string. (string, default: ",(0,a.kt)("inlineCode",{parentName:"p"},"%-%"),")"),(0,a.kt)("h3",{id:"apiurl"},"apiUrl"),(0,a.kt)("p",null,"The URL to fetch localization texts from in development mode. (string, default: ",(0,a.kt)("inlineCode",{parentName:"p"},"https://app.tolgee.io"),")"),(0,a.kt)("h3",{id:"apikey"},"apiKey"),(0,a.kt)("p",null,"Your secret key, which you can ",(0,a.kt)("a",{parentName:"p",href:"../platform/api-keys-and-pat-tokens"},"obtain in web application"),". (string, default: empty string)"),(0,a.kt)("h3",{id:"defaultlanguage"},"defaultLanguage"),(0,a.kt)("p",null,"The default language. (string, default: ",(0,a.kt)("inlineCode",{parentName:"p"},"en"),")"),(0,a.kt)("h3",{id:"fallbacklanguage"},"fallbackLanguage"),(0,a.kt)("p",null,"The language used when current text is not available in current language. (string, default: ",(0,a.kt)("inlineCode",{parentName:"p"},"en"),")"),(0,a.kt)("h3",{id:"developmenttranslationssource"},"developmentTranslationsSource"),(0,a.kt)("p",null,"Whether to use local files to translate without wrapping in development mode or to use values obtained from REST API."),(0,a.kt)("p",null,"Using of ",(0,a.kt)("inlineCode",{parentName:"p"},"TranslationSources:LOCAL_FILE")," will be a bit faster. The translations will be not loaded from REST API in both\nback-end and front-end, but just in front-end (browser JS integration)."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Using of ",(0,a.kt)("inlineCode",{parentName:"p"},"TranslationSources:LOCAL_FILE")," could result in different result of translations, which are translated by JS\nlibrary running on front-end and PHP library running on back-end. Use with caution.")),(0,a.kt)("p",null,"(string, default: ",(0,a.kt)("inlineCode",{parentName:"p"},"TranslationSources::API"),")"),(0,a.kt)("h3",{id:"localfilesabsolutepath"},"localFilesAbsolutePath"),(0,a.kt)("p",null,"Absolute path to directory, where exported translations are loaded from in production mode or with\n",(0,a.kt)("a",{parentName:"p",href:"using_with_php#safe-translating"},"safe translating."),"\n(string, default: ",(0,a.kt)("inlineCode",{parentName:"p"},'__DIR__ . "../../../../i18n"'),")"))}d.isMDXComponent=!0}}]);